@(repository: gitbucket.core.service.RepositoryService.RepositoryInfo, hasWritePermission: Boolean)(implicit context: gitbucket.core.controller.Context, s: gitbucket.core.model.Profile.profile.blockingApi.Session)
@import gitbucket.core.view.helpers
@gitbucket.core.html.main(s"${repository.owner}/${repository.name}", Some(repository)) {
  @gitbucket.core.html.menu("tags", repository){
    <table class="table table-bordered">
      <thead>
        <tr>
          <th width="40%">Tag</th>
          <th width="15%">Date</th>
          <th width="15%">Commit</th>
          <th width="15%">Download</th>
          <th width="15%">Release</th>
        </tr>
      </thead>
      <tbody>
        @repository.tags.reverseMap { tag =>
          <tr>
            <td><a href="@helpers.url(repository)/tree/@helpers.encodeRefName(tag.name)">@tag.name</a></td>
            <td>@gitbucket.core.helper.html.datetimeago(tag.time, false)</td>
            <td class="monospace"><a href="@helpers.url(repository)/commit/@tag.id">@tag.id.substring(0, 10)</a></td>
            <td>
                <a href="@helpers.url(repository)/archive/@{helpers.encodeRefName(tag.name)}.zip">ZIP</a>
                <a href="@helpers.url(repository)/archive/@{helpers.encodeRefName(tag.name)}.tar.gz">TAR.GZ</a>
            </td>
            <td>
              @repository.getReleaseByTag(tag.name).map{ release =>
              <a href="@helpers.url(repository)/releases/@release.releaseId">Release</a>
              }.getOrElse{
                @if(hasWritePermission){
                <div class="show-title pull-right">
                  <a class="btn btn-success" href="@helpers.url(repository)/releases/@{helpers.encodeRefName(tag.name)}/create">Create release</a>
                </div>
                }else{
                <br />
                }
              }
            </td>
          </tr>
        }
      </tbody>
    </table>
  }
}
