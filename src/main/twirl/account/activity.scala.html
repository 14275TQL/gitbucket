@(account: model.Account, activities: List[model.Activity])(implicit context: app.Context)
@import context._
@import view.helpers._
@html.main(account.userName){
  <div class="container-fluid">
    <div class="row-fluid">
      <div class="span4">
        <div class="block">
          <div class="block-header">@account.userName</div>
        </div>
        <div class="block">
          <div><i class="icon-home"></i> <a href="@account.url">@account.url</a></div>
          <div><i class="icon-time"></i> <span class="muted">Joined on</span> @date(account.registeredDate)</div>
        </div>
      </div>
      <div class="span8">
        @tab(account, "activity")
        @if(activities.isEmpty){
          No activity
        } else {
          @activities.map { activity =>
            <div class="block">
              <div class="muted smal">@datetime(activity.activityDate)</div>
              <div class="strong">@activityMessage(activity.message)</div>
              @activity.additionalInfo.map { additionalInfo =>
                @(activity.activityType match {
                  case "create_wiki" => {
                    <div>Created <a href={"%s/%s/%s/wiki/%s".format(path, activity.userName, activity.repositoryName, additionalInfo)}>{additionalInfo}</a>.</div>
                  }
                  case "edit_wiki" => {
                    <div>Edited <a href={"%s/%s/%s/wiki/%s".format(path, activity.userName, activity.repositoryName, additionalInfo)}>{additionalInfo}</a>.</div>
                  }
                  case "push" => {
                    <div>
                      {additionalInfo.split("\n").map{ commit => 
                        <div>
                          <a href={"%s/%s/%s/commit/%s".format(path, activity.userName, activity.repositoryName, commit.substring(0, 40))} class="monospace">{commit.substring(0, 7)}</a>
                          <span>{commit.substring(41)}</span>
                        </div>
                      }}
                    </div>
                  }
                  case _ => {
                    <div>{additionalInfo}</div>
                  }
                })
              }
            </div>
          }
        }
      </div>
    </div>
  </div>
}
