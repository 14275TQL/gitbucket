@(issues: List[app.IssueSearchResult],
  fileCount: Int,
  query: String,
  page: Int,
  repository: service.RepositoryService.RepositoryInfo)(implicit context: app.Context)
@import context._
@import view.helpers._
@html.main("Search Results", Some(repository)){
  @menu("issue", fileCount, issues.size, query, repository){
    @if(issues.isEmpty){
      <h4>We couldn't find any code matching '@query'</h4>
    } else {
      <h4>We've found @issues.size code @plural(issues.size, "result")</h4>
    }
    @issues.drop((page - 1) * app.RepositorySearch.IssueLimit).take(app.RepositorySearch.IssueLimit).map { issue =>
      <div class="block">
        <div class="pull-right muted">#@issue.issueId</div>
        <h4 style="margin-top: 0px;"><a href="@url(repository)/issues/@issue.issueId">@issue.title</a></h4>
        <pre>@Html(issue.highlightText)</pre>
        <div class="small muted">
          Opened by <a href="@url(issue.openedUserName)" class="username">@issue.openedUserName</a>
          at @datetime(issue.registeredDate)
          @if(issue.commentCount > 0){
            &nbsp;&nbsp;<i class="icon-comment"></i><strong>@issue.commentCount</strong> @plural(issue.commentCount, "comment")
          }
        </div>
      </div>
    }
    @helper.html.paginator(page, issues.size, app.RepositorySearch.IssueLimit, 10,
      s"${url(repository)}/search?q=${urlEncode(query)}&type=issue")
  }
}