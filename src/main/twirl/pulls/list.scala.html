@(issues: List[service.IssuesService.IssueInfo],
  counts: List[service.PullRequestService.PullRequestCount],
  page: Int,
  collaborators: List[String],
  milestones: List[model.Milestone],
  labels: List[model.Label],
  openCount: Int,
  closedCount: Int,
  condition: service.IssuesService.IssueSearchCondition,
  repository: service.RepositoryService.RepositoryInfo,
  hasWritePermission: Boolean)(implicit context: app.Context)
@import context._
@import view.helpers._
@import service.IssuesService.IssueInfo
@html.main(s"Pull Requests - ${repository.owner}/${repository.name}", Some(repository)){
  @html.menu("pulls", repository){
    @_root_.issues.html.tab("pulls", false, repository)
    <div class="row-fluid">
      <div class="span12">
        @listparts(issues, page, openCount, closedCount, condition, collaborators, milestones, labels, Some(repository), hasWritePermission)
      </div>
    </div>
    @if(hasWritePermission){
      <form id="batcheditForm" method="POST">
        <input type="hidden" name="value"/>
        <input type="hidden" name="checked"/>
        <input type="hidden" name="from" value="pulls"/>
      </form>
    }
  }
}
@if(hasWritePermission){
<script>
$(function(){
  $('.table-issues input[type=checkbox]').change(function(){
    if($('.table-issues input[type=checkbox]').filter(':checked').length == 0){
      $('#table-issues-control').show();
      $('#table-issues-batchedit').hide();
    } else {
      $('#table-issues-control').hide();
      $('#table-issues-batchedit').show();
    }
  }).filter(':first').change();

  var submitBatchEdit = function(action, value) {
    var checked = $('.table-issues input[type=checkbox]').filter(':checked').map(function(){ return this.value; }).get().join();
    var form = $('#batcheditForm');
    form.find('input[name=value]').val(value);
    form.find('input[name=checked]').val(checked);
    form.attr('action', action);
    form.submit();
  };

  $('a.toggle-state').click(function(){
    submitBatchEdit('@url(repository)/issues/batchedit/state', $(this).data('id'));
  });
  $('a.toggle-label').click(function(){
    submitBatchEdit('@url(repository)/issues/batchedit/label', $(this).data('id'));
  });
  $('a.toggle-assign').click(function(){
    submitBatchEdit('@url(repository)/issues/batchedit/assign', $(this).data('name'));
  });
  $('a.toggle-milestone').click(function(){
    submitBatchEdit('@url(repository)/issues/batchedit/milestone', $(this).data('id'));
  });
});
</script>
}
